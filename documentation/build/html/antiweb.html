

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Antiweb documentation &mdash; antiweb 0.3.3 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="antiweb 0.3.3 documentation" href="index.html"/>
        <link rel="next" title="Readers" href="Reader.html"/>
        <link rel="prev" title="Process overview" href="process_overview.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> antiweb
          

          
          </a>

          
            
            
              <div class="version">
                0.3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="process_overview.html">Process overview</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Antiweb documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#objects">Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="#document">Document</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">Document</a></li>
<li class="toctree-l3"><a class="reference internal" href="#line">Line</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#file-layout">File Layout</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#writing-the-documentation-files">Writing the documentation files</a></li>
<li class="toctree-l3"><a class="reference internal" href="#process-file">process_file</a></li>
<li class="toctree-l3"><a class="reference internal" href="#search-for-generated-block">search_for_generated_block</a></li>
<li class="toctree-l3"><a class="reference internal" href="#imports">&lt;&lt;imports&gt;&gt;</a></li>
<li class="toctree-l3"><a class="reference internal" href="#management">&lt;&lt;management&gt;&gt;</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id2">&lt;&lt;document&gt;&gt;</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#multi-file-processing-and-sphinx-support">Multi-File Processing and Sphinx Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-to-add-new-languages">How to add new languages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#language-specific-comment-markers">Language specific comment markers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#example">Example</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Reader.html">Readers</a></li>
<li class="toctree-l1"><a class="reference internal" href="directives.html">Directives</a></li>
<li class="toctree-l1"><a class="reference internal" href="antisphinx.html">antisphinx</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="motivation.html">Why another literate programming tool?</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">antiweb</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Antiweb documentation</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/antiweb.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="antiweb-documentation">
<h1>Antiweb documentation<a class="headerlink" href="#antiweb-documentation" title="Permalink to this headline">¶</a></h1>
<p>If you just want to generate the documentation from a source file use
the following function:</p>
<dl class="function">
<dt id="generate">
<code class="descname">generate</code><span class="sig-paren">(</span><em>fname</em>, <em>tokens</em>, <em>warnings</em><span class="sig-paren">)</span><a class="headerlink" href="#generate" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a rst file from a source file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>fname</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a>) &#8211; The path to the source file.</li>
<li><strong>tokens</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#list" title="(in Python v2.7)"><em>list</em></a>) &#8211; A list of string tokens, used for &#64;if directives.</li>
<li><strong>show_warnings</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) &#8211; Warnings will be written
via the logging module.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">generate</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span> <span class="n">tokens</span><span class="p">,</span> <span class="n">show_warnings</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">text</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">IOError</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;file not found: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">fname</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

    <span class="n">lexer</span> <span class="o">=</span> <span class="n">pm</span><span class="o">.</span><span class="n">get_lexer_for_filename</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span>
    <span class="c1">#get the language specific comment markers based on the pygments lexer name</span>
    <span class="n">single_comment_markers</span><span class="p">,</span>  <span class="n">block_comment_markers</span> <span class="o">=</span> <span class="n">get_comment_markers</span><span class="p">(</span><span class="n">lexer</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
    <span class="c1">#initialise a new Reader based on the pygments lexer name</span>
    <span class="n">reader</span> <span class="o">=</span> <span class="n">readers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">lexer</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">Reader</span><span class="p">)(</span><span class="n">lexer</span><span class="p">,</span> <span class="n">single_comment_markers</span><span class="p">,</span>  <span class="n">block_comment_markers</span><span class="p">)</span>

    <span class="n">document</span> <span class="o">=</span> <span class="n">Document</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">reader</span><span class="p">,</span> <span class="n">fname</span><span class="p">,</span> <span class="n">tokens</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">document</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">show_warnings</span><span class="p">,</span> <span class="n">fname</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</dd></dl>

<div class="section" id="objects">
<h2>Objects<a class="headerlink" href="#objects" title="Permalink to this headline">¶</a></h2>
<div class="compound">
<p class="compound-first">The graph below show the main objects of antiweb:</p>
<img src="_images/graphviz-cd85d7b2fc0bf6b875b662a2b5b236658df9f2af.png" alt="digraph collaboration {
document [shape=box, label=&quot;document&quot;]
reader   [shape=box, label=&quot;reader&quot;]
directives [shape=box, label=&quot;directive&quot; ]
blocks [shape=box]
lines [shape=box]

document -&gt; reader [label=&quot;uses&quot;]
reader -&gt; directives [label=&quot;creates&quot;]
document -&gt; directives [label=&quot;uses&quot;]
document -&gt; blocks [label=&quot;contains&quot;]
directives -&gt; blocks [label=&quot;prepare&quot;]
blocks -&gt; lines [label=&quot;contains&quot;]
lines -&gt; directives [label=&quot;contains&quot;]
}" />
<p class="compound-last">The <a class="reference internal" href="#Document" title="Document"><code class="xref py py-class docutils literal"><span class="pre">document</span></code></a> manages the complete transformation: It uses a
<a class="reference internal" href="Reader.html#Reader" title="Reader"><code class="xref py py-class docutils literal"><span class="pre">reader</span></code></a>  to parse source code. The <a class="reference internal" href="Reader.html#Reader" title="Reader"><code class="xref py py-class docutils literal"><span class="pre">reader</span></code></a>
creates <code class="xref py py-class docutils literal"><span class="pre">directives</span></code> objects for each found antiweb directive in the source
code. The source code is split in text blocks which consists of several
<a class="reference internal" href="#Line" title="Line"><code class="xref py py-class docutils literal"><span class="pre">lines</span></code></a>. The <a class="reference internal" href="#Document" title="Document"><code class="xref py py-class docutils literal"><span class="pre">document</span></code></a> process all
<code class="xref py py-class docutils literal"><span class="pre">directives</span></code>  to generate the output document.</p>
</div>
</div>
<div class="section" id="document">
<h2>Document<a class="headerlink" href="#document" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id1">
<h3>Document<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="Document">
<em class="property">class </em><code class="descname">Document</code><span class="sig-paren">(</span><em>text</em>, <em>reader</em>, <em>fname</em>, <em>tokens</em><span class="sig-paren">)</span><a class="headerlink" href="#Document" title="Permalink to this definition">¶</a></dt>
<dd><p>This is the mediator communicating with all other classes
to generate rst output.
:param string text: the source code to parse.
:param reader: An instance of <a class="reference internal" href="Reader.html#Reader" title="Reader"><code class="xref py py-class docutils literal"><span class="pre">Reader</span></code></a>.
:param string fname: The file name of the source code.
:param tokens: A sequence of tokens usable for the <code class="docutils literal"><span class="pre">&#64;if</span></code> directive.</p>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Document</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="c1">#Attributes</span>
    <span class="o">&lt;&lt;</span><span class="n">Document</span><span class="o">.</span><span class="n">errors</span><span class="o">&gt;&gt;</span>
    <span class="o">&lt;&lt;</span><span class="n">Document</span><span class="o">.</span><span class="n">blocks</span><span class="o">&gt;&gt;</span>
    <span class="o">&lt;&lt;</span><span class="n">Document</span><span class="o">.</span><span class="n">blocks_included</span><span class="o">&gt;&gt;</span>
    <span class="o">&lt;&lt;</span><span class="n">Document</span><span class="o">.</span><span class="n">compiled_blocks</span><span class="o">&gt;&gt;</span>
    <span class="o">&lt;&lt;</span><span class="n">Document</span><span class="o">.</span><span class="n">sub_documents</span><span class="o">&gt;&gt;</span>
    <span class="o">&lt;&lt;</span><span class="n">Document</span><span class="o">.</span><span class="n">tokens</span><span class="o">&gt;&gt;</span>
    <span class="o">&lt;&lt;</span><span class="n">Document</span><span class="o">.</span><span class="n">macros</span><span class="o">&gt;&gt;</span>
    <span class="o">&lt;&lt;</span><span class="n">Document</span><span class="o">.</span><span class="n">fname</span><span class="o">&gt;&gt;</span>
    <span class="o">&lt;&lt;</span><span class="n">Document</span><span class="o">.</span><span class="n">reader</span><span class="o">&gt;&gt;</span>
    <span class="o">&lt;&lt;</span><span class="n">Document</span><span class="o">.</span><span class="n">lines</span><span class="o">&gt;&gt;</span>

    <span class="c1">#Methods</span>
    <span class="o">&lt;&lt;</span><span class="n">Document</span><span class="o">.</span><span class="n">__init__</span><span class="o">&gt;&gt;</span>
    <span class="o">&lt;&lt;</span><span class="n">Document</span><span class="o">.</span><span class="n">process</span><span class="o">&gt;&gt;</span>
    <span class="o">&lt;&lt;</span><span class="n">Document</span><span class="o">.</span><span class="n">get_subdoc</span><span class="o">&gt;&gt;</span>
    <span class="o">&lt;&lt;</span><span class="n">Document</span><span class="o">.</span><span class="n">add_error</span><span class="o">&gt;&gt;</span>
    <span class="o">&lt;&lt;</span><span class="n">Document</span><span class="o">.</span><span class="n">check_errors</span><span class="o">&gt;&gt;</span>
    <span class="o">&lt;&lt;</span><span class="n">Document</span><span class="o">.</span><span class="n">collect_blocks</span><span class="o">&gt;&gt;</span>
    <span class="o">&lt;&lt;</span><span class="n">Document</span><span class="o">.</span><span class="n">get_compiled_block</span><span class="o">&gt;&gt;</span>
    <span class="o">&lt;&lt;</span><span class="n">Document</span><span class="o">.</span><span class="n">compile_block</span><span class="o">&gt;&gt;</span>
</pre></div>
</td></tr></table></div>
<dl class="attribute">
<dt id="Document.errors">
<code class="descname">errors</code><a class="headerlink" href="#Document.errors" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of errors found during generation.</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="Document.blocks">
<code class="descname">blocks</code><a class="headerlink" href="#Document.blocks" title="Permalink to this definition">¶</a></dt>
<dd><p>A dictionary of all found blocks: Name -&gt; List of Lines</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="n">blocks</span> <span class="o">=</span> <span class="p">{}</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="Document.blocks_included">
<code class="descname">blocks_included</code><a class="headerlink" href="#Document.blocks_included" title="Permalink to this definition">¶</a></dt>
<dd><p>A set containing all block names that have been included by
an &#64;include directive.</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="n">blocks_included</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="Document.compiled_blocks">
<code class="descname">compiled_blocks</code><a class="headerlink" href="#Document.compiled_blocks" title="Permalink to this definition">¶</a></dt>
<dd><p>A set containing all block names that have been already
compiled.</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="n">compiled_blocks</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="Document.sub_documents">
<code class="descname">sub_documents</code><a class="headerlink" href="#Document.sub_documents" title="Permalink to this definition">¶</a></dt>
<dd><p>A cache dictionary of sub documents, referenced by
<code class="docutils literal"><span class="pre">&#64;include</span></code> directives: Filename -&gt; Document</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="n">sub_documents</span> <span class="o">=</span> <span class="p">{}</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="Document.tokens">
<code class="descname">tokens</code><a class="headerlink" href="#Document.tokens" title="Permalink to this definition">¶</a></dt>
<dd><p>A set of token names that can be used for the <code class="docutils literal"><span class="pre">&#64;if</span></code> directive.</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="n">tokens</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="Document.macros">
<code class="descname">macros</code><a class="headerlink" href="#Document.macros" title="Permalink to this definition">¶</a></dt>
<dd><p>A dictionary containing the macros that can be used
by the <code class="docutils literal"><span class="pre">&#64;subst</span></code> directive: Macro name -&gt; substitution.</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="n">macros</span> <span class="o">=</span> <span class="p">{}</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="Document.fname">
<code class="descname">fname</code><a class="headerlink" href="#Document.fname" title="Permalink to this definition">¶</a></dt>
<dd><p>The file name of the document&#8217;s source.</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="n">fname</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="Document.reader">
<code class="descname">reader</code><a class="headerlink" href="#Document.reader" title="Permalink to this definition">¶</a></dt>
<dd><p>The instance of a <a class="reference internal" href="Reader.html#Reader" title="Reader"><code class="xref py py-class docutils literal"><span class="pre">Reader</span></code></a> object.</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="n">reader</span> <span class="o">=</span> <span class="kc">None</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="Document.lines">
<code class="descname">lines</code><a class="headerlink" href="#Document.lines" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of <a class="reference internal" href="#Line" title="Line"><code class="xref py py-class docutils literal"><span class="pre">Line</span></code></a> objects representing the whole documents
split in lines.</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="n">lines</span> <span class="o">=</span> <span class="p">[]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="Document.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>text</em>, <em>reader</em>, <em>fname</em>, <em>tokens</em><span class="sig-paren">)</span><a class="headerlink" href="#Document.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>The constructor.</p>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">reader</span><span class="p">,</span> <span class="n">fname</span><span class="p">,</span> <span class="n">tokens</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">blocks</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">blocks_included</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">compiled_blocks</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">sub_documents</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">tokens</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">tokens</span> <span class="ow">or</span> <span class="p">[])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">macros</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">&quot;__file__&quot;</span> <span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">fname</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span>
                    <span class="s2">&quot;__codeprefix__&quot;</span> <span class="p">:</span> <span class="s2">&quot;&quot;</span> <span class="p">}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">fname</span> <span class="o">=</span> <span class="n">fname</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">reader</span> <span class="o">=</span> <span class="n">reader</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">lines</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">reader</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</dd></dl>

<dl class="method">
<dt id="Document.process">
<code class="descname">process</code><span class="sig-paren">(</span><em>show_warnings</em><span class="sig-paren">)</span><a class="headerlink" href="#Document.process" title="Permalink to this definition">¶</a></dt>
<dd><p>Processes the document and generates the output.
:param bool show_warnings: If <code class="docutils literal"><span class="pre">True</span></code> warnings are emitted.
:return: A string representing the rst output.</p>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">show_warnings</span><span class="p">,</span> <span class="n">fname</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">collect_blocks</span><span class="p">()</span>

    <span class="c1"># check if there are any lines in the file and add the according error message</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_error</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;empty file&quot;</span><span class="p">,</span> <span class="n">fname</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_errors</span><span class="p">()</span>
    <span class="k">elif</span> <span class="s2">&quot;&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">blocks</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">fname</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.rst&quot;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_error</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;no @start() directive found (I need one)&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_errors</span><span class="p">()</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_compiled_block</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_errors</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">show_warnings</span><span class="p">:</span>
        <span class="o">&lt;&lt;</span><span class="n">show</span> <span class="n">warnings</span><span class="o">&gt;&gt;</span>
    <span class="n">text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">reader</span><span class="o">.</span><span class="n">filter_output</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
    <span class="n">return_text</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">text</span><span class="p">:</span>
         <span class="n">return_text</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">attrgetter</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">),</span> <span class="n">text</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">return_text</span>
</pre></div>
</td></tr></table></div>
<p id="show-warnings"><strong>&lt;&lt;show warnings&gt;&gt;</strong></p>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">blocks_included</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>           <span class="c1">#may not cause a warning</span>
<span class="bp">self</span><span class="o">.</span><span class="n">blocks_included</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;__macros__&quot;</span><span class="p">)</span> <span class="c1">#may not cause a warning</span>
<span class="n">unincluded</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">blocks</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">blocks_included</span>
<span class="k">if</span> <span class="n">unincluded</span><span class="p">:</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;The following block were not included:&quot;</span><span class="p">)</span>
    <span class="n">warnings</span> <span class="o">=</span> <span class="p">[</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">blocks</span><span class="p">[</span><span class="n">b</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">unincluded</span> <span class="p">]</span>
    <span class="n">warnings</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">operator</span><span class="o">.</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">l</span><span class="p">,</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">warnings</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;  </span><span class="si">%s</span><span class="s2">(line </span><span class="si">%i</span><span class="s2">)&quot;</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">l</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</dd></dl>

<dl class="method">
<dt id="Document.get_subdoc">
<code class="descname">get_subdoc</code><span class="sig-paren">(</span><em>rpath</em><span class="sig-paren">)</span><a class="headerlink" href="#Document.get_subdoc" title="Permalink to this definition">¶</a></dt>
<dd><p>Tries to compile a document with the relative path rpath.
:param string rpath: The relative path to the root
containing document.
:return: A <a class="reference internal" href="#Document" title="Document"><code class="xref py py-class docutils literal"><span class="pre">Document</span></code></a> reference to the sub document.</p>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_subdoc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rpath</span><span class="p">):</span>
    <span class="o">&lt;&lt;</span><span class="k">return</span> <span class="kn">from</span> <span class="nn">cache</span> <span class="k">if</span> <span class="n">possible</span><span class="o">&gt;&gt;</span>
    <span class="o">&lt;&lt;</span><span class="n">insert</span> <span class="n">macros</span> <span class="n">function</span><span class="o">&gt;&gt;</span>
    <span class="o">&lt;&lt;</span><span class="n">read</span> <span class="n">the</span> <span class="n">source</span> <span class="n">file</span><span class="o">&gt;&gt;</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">sub_documents</span><span class="p">[</span><span class="n">rpath</span><span class="p">]</span> <span class="o">=</span> <span class="n">doc</span>
    <span class="k">return</span> <span class="n">doc</span>
</pre></div>
</td></tr></table></div>
<p id="return-from-cache-if-possible"><strong>&lt;&lt;return from cache if possible&gt;&gt;</strong></p>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">sub_documents</span><span class="p">[</span><span class="n">rpath</span><span class="p">]</span>
<span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
    <span class="k">pass</span>
</pre></div>
</td></tr></table></div>
<p id="insert-macros-function"><strong>&lt;&lt;insert macros function&gt;&gt;</strong></p>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">insert_macros</span><span class="p">(</span><span class="n">subdoc</span><span class="p">):</span>
    <span class="c1"># if sub doc has no macros insert mine</span>
    <span class="k">if</span> <span class="p">(</span><span class="s2">&quot;__macros__&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">subdoc</span><span class="o">.</span><span class="n">blocks</span>
        <span class="ow">and</span> <span class="s2">&quot;__macros__&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">blocks</span><span class="p">):</span>
        <span class="n">file_</span> <span class="o">=</span> <span class="n">subdoc</span><span class="o">.</span><span class="n">macros</span><span class="p">[</span><span class="s2">&quot;__file__&quot;</span><span class="p">]</span> <span class="c1"># preserve __file__</span>
        <span class="n">subdoc</span><span class="o">.</span><span class="n">macros</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">macros</span><span class="p">)</span>
        <span class="n">subdoc</span><span class="o">.</span><span class="n">macros</span><span class="p">[</span><span class="s2">&quot;__file__&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">file_</span>
</pre></div>
</td></tr></table></div>
<p id="read-the-source-file"><strong>&lt;&lt;read the source file&gt;&gt;</strong></p>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">head</span><span class="p">,</span> <span class="n">tail</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fname</span><span class="p">)</span>
<span class="n">fpath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">head</span><span class="p">,</span> <span class="n">rpath</span><span class="p">)</span>

<span class="k">try</span><span class="p">:</span>
    <span class="c1">#print &quot;try open&quot;, fpath</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fpath</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="k">except</span> <span class="ne">IOError</span><span class="p">:</span>
    <span class="n">doc</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Could not open: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">fpath</span><span class="p">)</span>

<span class="k">else</span><span class="p">:</span>
    <span class="c1">#parse the file</span>
    <span class="n">lexer</span> <span class="o">=</span> <span class="n">pm</span><span class="o">.</span><span class="n">get_lexer_for_filename</span><span class="p">(</span><span class="n">rpath</span><span class="p">)</span>
    <span class="n">single_comment_markers</span><span class="p">,</span>  <span class="n">block_comment_markers</span> <span class="o">=</span> <span class="n">get_comment_markers</span><span class="p">(</span><span class="n">lexer</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
    <span class="n">reader</span> <span class="o">=</span> <span class="n">readers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">lexer</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">Reader</span><span class="p">)(</span><span class="n">lexer</span><span class="p">,</span> <span class="n">single_comment_markers</span><span class="p">,</span>  <span class="n">block_comment_markers</span><span class="p">)</span>

    <span class="n">doc</span> <span class="o">=</span> <span class="n">Document</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">reader</span><span class="p">,</span> <span class="n">rpath</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tokens</span><span class="p">)</span>
    <span class="n">doc</span><span class="o">.</span><span class="n">collect_blocks</span><span class="p">()</span>
    <span class="n">insert_macros</span><span class="p">(</span><span class="n">doc</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</dd></dl>

<dl class="method">
<dt id="Document.add_error">
<code class="descname">add_error</code><span class="sig-paren">(</span><em>line</em>, <em>text</em><span class="sig-paren">)</span><a class="headerlink" href="#Document.add_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds an error to the list.
:param integer line_number: The line number that causes the error.
:param string text: An error text.
:param string fname: name of currently processed file (needed if no data in self.lines)</p>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">add_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line_number</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">fname</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
    <span class="c1"># determine if access to line_number is possible</span>
    <span class="k">if</span> <span class="n">line_number</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">):</span>
        <span class="n">line</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">[</span><span class="n">line_number</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># without a line in self.lines, antiweb would crash on appending it to the errors (errorlist)</span>
        <span class="c1"># we add a &#39;fake line&#39; to prevent that issue</span>
        <span class="n">line</span> <span class="o">=</span> <span class="n">Line</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">line</span><span class="p">,</span> <span class="n">text</span><span class="p">))</span>
</pre></div>
</td></tr></table></div>
</dd></dl>

<dl class="method">
<dt id="Document.check_errors">
<code class="descname">check_errors</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Document.check_errors" title="Permalink to this definition">¶</a></dt>
<dd><p>Raises a <code class="docutils literal"><span class="pre">WebError</span></code> exception if error were found.</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">check_errors</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">errors</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">WebError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">errors</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="Document.collect_blocks">
<code class="descname">collect_blocks</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Document.collect_blocks" title="Permalink to this definition">¶</a></dt>
<dd><p>Collects all text blocks.</p>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">collect_blocks</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">blocks</span> <span class="o">=</span> <span class="p">[</span> <span class="n">d</span><span class="o">.</span><span class="n">collect_block</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
               <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">l</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lines</span><span class="p">)</span>
               <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">l</span><span class="o">.</span><span class="n">directives</span> <span class="p">]</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">blocks</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="nb">bool</span><span class="p">,</span> <span class="n">blocks</span><span class="p">)))</span>

    <span class="k">if</span> <span class="s2">&quot;__macros__&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">blocks</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_compiled_block</span><span class="p">(</span><span class="s2">&quot;__macros__&quot;</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</dd></dl>

<dl class="method">
<dt id="Document.get_compiled_block">
<code class="descname">get_compiled_block</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#Document.get_compiled_block" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the compiled version of a text block.
Compiled means: all directives where processed.
:param string name: The name of the text block:
:return: A list of <a class="reference internal" href="#Line" title="Line"><code class="xref py py-class docutils literal"><span class="pre">Line</span></code></a> objects representing
the text block.</p>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_compiled_block</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">blocks</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">compiled_blocks</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">blocks</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">compile_block</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">blocks</span><span class="p">[</span><span class="n">name</span><span class="p">])</span>
</pre></div>
</td></tr></table></div>
</dd></dl>

<dl class="method">
<dt id="Document.compile_block">
<code class="descname">compile_block</code><span class="sig-paren">(</span><em>name</em>, <em>block</em><span class="sig-paren">)</span><a class="headerlink" href="#Document.compile_block" title="Permalink to this definition">¶</a></dt>
<dd><p>Compiles a text block.
:param string name: The name of the block
:param block: A list of <a class="reference internal" href="#Line" title="Line"><code class="xref py py-class docutils literal"><span class="pre">Line</span></code></a> objects representing
the text block to compile.
:return: A list of <a class="reference internal" href="#Line" title="Line"><code class="xref py py-class docutils literal"><span class="pre">Line</span></code></a> objects representing
the compiled text block.</p>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">compile_block</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">block</span><span class="p">):</span>
    <span class="o">&lt;&lt;</span><span class="n">find_next_directive</span><span class="o">&gt;&gt;</span>

    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">directive_index</span> <span class="o">=</span> <span class="n">find_next_directive</span><span class="p">(</span><span class="n">block</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">directive_index</span><span class="p">:</span> <span class="k">break</span>
        <span class="n">directive</span><span class="p">,</span> <span class="n">index</span> <span class="o">=</span> <span class="n">directive_index</span>
        <span class="n">directive</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">block</span><span class="p">,</span> <span class="n">index</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">compiled_blocks</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">block</span>
</pre></div>
</td></tr></table></div>
<p id="find-next-directive"><strong>&lt;&lt;find_next_directive&gt;&gt;</strong></p>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">find_next_directive</span><span class="p">(</span><span class="n">block</span><span class="p">):</span>
    <span class="c1"># returns the next available directive</span>
    <span class="n">min_line</span> <span class="o">=</span> <span class="p">[</span> <span class="p">(</span><span class="n">l</span><span class="o">.</span><span class="n">directives</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">priority</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
                 <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">l</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">block</span><span class="p">)</span> <span class="k">if</span> <span class="n">l</span><span class="o">.</span><span class="n">directives</span> <span class="p">]</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">min_line</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="n">prio</span><span class="p">,</span> <span class="n">index</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">min_line</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">block</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">directives</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">index</span>
</pre></div>
</td></tr></table></div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="line">
<h3>Line<a class="headerlink" href="#line" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="Line">
<em class="property">class </em><code class="descname">Line</code><span class="sig-paren">(</span><em>fname</em>, <em>index</em>, <em>text</em><span class="optional">[</span>, <em>directives</em><span class="optional">[</span>, <em>type</em><span class="optional">]</span><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#Line" title="Permalink to this definition">¶</a></dt>
<dd><p>This class represents a text line.</p>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Line</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="c1">#Attributes</span>
    <span class="o">&lt;&lt;</span><span class="n">Line</span><span class="o">.</span><span class="n">_directives</span><span class="o">&gt;&gt;</span>
    <span class="o">&lt;&lt;</span><span class="n">Line</span><span class="o">.</span><span class="n">fname</span><span class="o">&gt;&gt;</span>
    <span class="o">&lt;&lt;</span><span class="n">Line</span><span class="o">.</span><span class="n">index</span><span class="o">&gt;&gt;</span>
    <span class="o">&lt;&lt;</span><span class="n">Line</span><span class="o">.</span><span class="n">text</span><span class="o">&gt;&gt;</span>
    <span class="o">&lt;&lt;</span><span class="n">Line</span><span class="o">.</span><span class="n">type</span><span class="o">&gt;&gt;</span>

    <span class="c1">#Methods</span>
    <span class="o">&lt;&lt;</span><span class="n">Line</span><span class="o">.</span><span class="n">__init__</span><span class="o">&gt;&gt;</span>
    <span class="o">&lt;&lt;</span><span class="n">Line</span><span class="o">.</span><span class="n">set</span><span class="o">&gt;&gt;</span>
    <span class="o">&lt;&lt;</span><span class="n">Line</span><span class="o">.</span><span class="n">like</span><span class="o">&gt;&gt;</span>
    <span class="o">&lt;&lt;</span><span class="n">Line</span><span class="o">.</span><span class="n">indented</span><span class="o">&gt;&gt;</span>
    <span class="o">&lt;&lt;</span><span class="n">Line</span><span class="o">.</span><span class="n">change_indent</span><span class="o">&gt;&gt;</span>
    <span class="o">&lt;&lt;</span><span class="n">Line</span><span class="o">.</span><span class="n">__len__</span><span class="o">&gt;&gt;</span>
    <span class="o">&lt;&lt;</span><span class="n">Line</span><span class="o">.</span><span class="n">__repr__</span><span class="o">&gt;&gt;</span>

    <span class="c1">#Properties</span>
    <span class="o">&lt;&lt;</span><span class="n">Line</span><span class="o">.</span><span class="n">indent</span><span class="o">&gt;&gt;</span>
    <span class="o">&lt;&lt;</span><span class="n">Line</span><span class="o">.</span><span class="n">sindent</span><span class="o">&gt;&gt;</span>
    <span class="o">&lt;&lt;</span><span class="n">Line</span><span class="o">.</span><span class="n">directives</span><span class="o">&gt;&gt;</span>
    <span class="o">&lt;&lt;</span><span class="n">Line</span><span class="o">.</span><span class="n">directive</span><span class="o">&gt;&gt;</span>
</pre></div>
</td></tr></table></div>
<dl class="attribute">
<dt id="Line._directives">
<code class="descname">_directives</code><a class="headerlink" href="#Line._directives" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of <a class="reference internal" href="directives.html#Directive" title="Directive"><code class="xref py py-class docutils literal"><span class="pre">Directive</span></code></a> objects, sorted
by their priority.</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="n">_directives</span> <span class="o">=</span> <span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="Line.fname">
<code class="descname">fname</code><a class="headerlink" href="#Line.fname" title="Permalink to this definition">¶</a></dt>
<dd><p>A string of the source&#8217;s file name the line belongs to.</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="n">fname</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="Line.index">
<code class="descname">index</code><a class="headerlink" href="#Line.index" title="Permalink to this definition">¶</a></dt>
<dd><p>The integer line index of the directive within the current block.</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="Line.text">
<code class="descname">text</code><a class="headerlink" href="#Line.text" title="Permalink to this definition">¶</a></dt>
<dd><p>A string containing the source line.</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="Line.type">
<code class="descname">type</code><a class="headerlink" href="#Line.type" title="Permalink to this definition">¶</a></dt>
<dd><p>A char representing the line type:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">d</span></code> stands for a document line</li>
<li><code class="docutils literal"><span class="pre">c</span></code> stands for a code line</li>
</ul>
</div></blockquote>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="nb">type</span> <span class="o">=</span> <span class="s2">&quot;d&quot;</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="Line.indent">
<code class="descname">indent</code><a class="headerlink" href="#Line.indent" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>An integer representing the line&#8217;s indentation.</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="nd">@property</span>
<span class="k">def</span> <span class="nf">indent</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">)</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">lstrip</span><span class="p">())</span>
</pre></div>
</div>
<dl class="attribute">
<dt id="Line.sindent">
<code class="descname">sindent</code><a class="headerlink" href="#Line.sindent" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>A string representation of the line&#8217;s indentation.</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="nd">@property</span>
<span class="k">def</span> <span class="nf">sindent</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="s2">&quot; &quot;</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">indent</span>
</pre></div>
</div>
<dl class="attribute">
<dt id="Line.directives">
<code class="descname">directives</code><a class="headerlink" href="#Line.directives" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>A sorted sequence of <a class="reference internal" href="directives.html#Directive" title="Directive"><code class="xref py py-class docutils literal"><span class="pre">Directive</span></code></a> objects.</p>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="nd">@property</span>
<span class="k">def</span> <span class="nf">directives</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_directives</span>


<span class="nd">@directives</span><span class="o">.</span><span class="n">setter</span>
<span class="k">def</span> <span class="nf">directives</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_directives</span> <span class="o">=</span> <span class="n">value</span><span class="p">[:]</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_directives</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_directives</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">operator</span><span class="o">.</span><span class="n">attrgetter</span><span class="p">(</span><span class="s2">&quot;priority&quot;</span><span class="p">))</span>
</pre></div>
</td></tr></table></div>
<dl class="attribute">
<dt id="Line.directive">
<code class="descname">directive</code><a class="headerlink" href="#Line.directive" title="Permalink to this definition">¶</a></dt>
<dd><p>The first of the contained <a class="reference internal" href="directives.html#Directive" title="Directive"><code class="xref py py-class docutils literal"><span class="pre">Directive</span></code></a> objects.</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="nd">@property</span>
<span class="k">def</span> <span class="nf">directive</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">directives</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">directives</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="Line.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>name</em>, <em>index</em>, <em>text</em><span class="optional">[</span>, <em>directives</em><span class="optional">[</span>, <em>type</em><span class="optional">]</span><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#Line.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>The constructor.</p>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fname</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">directives</span><span class="o">=</span><span class="p">(),</span> <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;d&#39;</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">fname</span> <span class="o">=</span> <span class="n">fname</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">index</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">text</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">directives</span> <span class="o">=</span> <span class="n">directives</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="nb">type</span>
</pre></div>
</td></tr></table></div>
</dd></dl>

<dl class="method">
<dt id="Line.set">
<code class="descname">set</code><span class="sig-paren">(</span><span class="optional">[</span><em>index=None</em><span class="optional">[</span>, <em>type=None</em><span class="optional">[</span>, <em>directives=None</em><span class="optional">]</span><span class="optional">]</span><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#Line.set" title="Permalink to this definition">¶</a></dt>
<dd><p>Changes the attributes <a class="reference internal" href="#Line.index" title="Line.index"><code class="xref py py-attr docutils literal"><span class="pre">index</span></code></a>, <a class="reference internal" href="#Line.type" title="Line.type"><code class="xref py py-attr docutils literal"><span class="pre">type</span></code></a>
and <a class="reference internal" href="#Line.directives" title="Line.directives"><code class="xref py py-attr docutils literal"><span class="pre">directives</span></code></a> at once.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>index</strong> (<em>integer</em>) &#8211; the line index.</li>
<li><strong>type</strong> (<em>char</em>) &#8211; Either <code class="docutils literal"><span class="pre">'d'</span></code> or <code class="docutils literal"><span class="pre">'c'</span></code>.</li>
<li><strong>directives</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#list" title="(in Python v2.7)"><em>list</em></a>) &#8211; A list of <code class="xref py py-class docutils literal"><span class="pre">DCirective</span></code> objects.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The <a class="reference internal" href="#Line" title="Line"><code class="xref py py-class docutils literal"><span class="pre">Line</span></code></a> object <code class="docutils literal"><span class="pre">self</span></code>.</p>
</td>
</tr>
</tbody>
</table>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">directives</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">index</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">index</span> <span class="o">=</span> <span class="n">index</span>

    <span class="k">if</span> <span class="nb">type</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="nb">type</span>

    <span class="k">if</span> <span class="n">directives</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">directives</span> <span class="o">=</span> <span class="n">directives</span>

    <span class="k">return</span> <span class="bp">self</span>



<span class="k">def</span> <span class="nf">clone</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dline</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>

    <span class="k">if</span> <span class="n">dline</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">directives</span><span class="p">:</span>
            <span class="n">d</span><span class="o">.</span><span class="n">line</span> <span class="o">=</span> <span class="n">dline</span>

    <span class="k">return</span> <span class="n">Line</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fname</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">directives</span><span class="p">[:],</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</dd></dl>

<dl class="method">
<dt id="Line.like">
<code class="descname">like</code><span class="sig-paren">(</span><em>text</em><span class="sig-paren">)</span><a class="headerlink" href="#Line.like" title="Permalink to this definition">¶</a></dt>
<dd><p>Clones the Line with a different text.</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">like</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">Line</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fname</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">indented</span><span class="p">(</span><span class="n">text</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="Line.indented">
<code class="descname">indented</code><span class="sig-paren">(</span><em>text</em><span class="sig-paren">)</span><a class="headerlink" href="#Line.indented" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the text, with the same indentation as <code class="docutils literal"><span class="pre">self</span></code>.</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">indented</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">sindent</span> <span class="o">+</span> <span class="n">text</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="Line.change_indent">
<code class="descname">change_indent</code><span class="sig-paren">(</span><em>delta</em><span class="sig-paren">)</span><a class="headerlink" href="#Line.change_indent" title="Permalink to this definition">¶</a></dt>
<dd><p>Changes the lines indentation.</p>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">change_indent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">delta</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">delta</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">delta</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="o">-</span><span class="n">delta</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">[</span><span class="n">delta</span><span class="p">:]</span>

    <span class="k">elif</span> <span class="n">delta</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">*</span><span class="n">delta</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">text</span>

    <span class="k">return</span> <span class="bp">self</span>
</pre></div>
</td></tr></table></div>
</dd></dl>

<dl class="method">
<dt id="Line.__len__">
<code class="descname">__len__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Line.__len__" title="Permalink to this definition">¶</a></dt>
<dd><p>returns the length of the stripped <a class="reference internal" href="#Line.text" title="Line.text"><code class="xref py py-attr docutils literal"><span class="pre">text</span></code></a>.</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="Line.__repr__">
<code class="descname">__repr__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Line.__repr__" title="Permalink to this definition">¶</a></dt>
<dd><p>returns a textual representation of the line.</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="s2">&quot;Line(</span><span class="si">%i</span><span class="s2">, </span><span class="si">%s</span><span class="s2">, </span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">directives</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="file-layout">
<h2>File Layout<a class="headerlink" href="#file-layout" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="o">&lt;&lt;</span><span class="n">imports</span><span class="o">&gt;&gt;</span>
<span class="o">&lt;&lt;</span><span class="n">management</span><span class="o">&gt;&gt;</span>


<span class="o">&lt;&lt;</span><span class="n">document</span><span class="o">&gt;&gt;</span>




<span class="o">&lt;&lt;</span><span class="n">create_out_file_name</span><span class="o">&gt;&gt;</span>

<span class="o">&lt;&lt;</span><span class="n">create_out_file_name_index</span><span class="o">&gt;&gt;</span>


<span class="o">&lt;&lt;</span><span class="n">insert_filename_in_index_file</span><span class="o">&gt;&gt;</span>

<span class="o">&lt;&lt;</span><span class="n">create_doc_directory</span><span class="o">&gt;&gt;</span>


<span class="o">&lt;&lt;</span><span class="n">replace_path_seperator</span><span class="o">&gt;&gt;</span>


<span class="o">&lt;&lt;</span><span class="n">write_static</span><span class="o">&gt;&gt;</span>

<span class="o">&lt;&lt;</span><span class="n">create_index_file</span><span class="o">&gt;&gt;</span>

<span class="o">&lt;&lt;</span><span class="n">parsing</span><span class="o">&gt;&gt;</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>

    <span class="n">options</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">parser</span> <span class="o">=</span> <span class="n">parsing</span><span class="p">()</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">StreamHandler</span><span class="p">())</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">options</span><span class="o">.</span><span class="n">warnings</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">options</span><span class="o">.</span><span class="n">warnings</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span><span class="p">:</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">print_help</span><span class="p">()</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

    <span class="n">index_rst</span> <span class="o">=</span> <span class="s2">&quot;index.rst&quot;</span>
    <span class="n">start_block</span> <span class="o">=</span> <span class="s2">&quot;.. start(generated)&quot;</span>
    <span class="n">end_block</span> <span class="o">=</span> <span class="s2">&quot;.. end(generated)&quot;</span>
</pre></div>
</td></tr></table></div>
<p>The program checks if a -r flag was given and if so, save the current directory and change it to the given one.</p>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">previous_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>

<span class="c1">#The user input (respectively the input antiweb sets when none is given) can be relative,</span>
<span class="c1">#so we grab the absolute path to work with.</span>
<span class="n">absolute_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

<span class="k">if</span> <span class="n">options</span><span class="o">.</span><span class="n">recursive</span><span class="p">:</span>
    <span class="n">directory</span> <span class="o">=</span> <span class="n">absolute_path</span>

    <span class="c1">#Check if the given path refers to an existing directory.</span>
    <span class="c1">#The program aborts if the directory does not exist or if the path refers to a file.</span>
    <span class="c1">#A file is not allowed here because the -r option requires a directory.</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">directory</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;directory not found: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">directory</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

    <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">directory</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">options</span><span class="o">.</span><span class="n">index</span><span class="p">:</span>
        <span class="n">index_rst</span> <span class="o">=</span> <span class="n">create_index_file</span><span class="p">(</span><span class="n">directory</span><span class="p">,</span> <span class="n">options</span><span class="o">.</span><span class="n">output</span><span class="p">,</span> <span class="n">index_rst</span><span class="p">,</span> <span class="n">start_block</span><span class="p">,</span> <span class="n">end_block</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>The program walks through the given directory and all subdirectories. The absolute file names
are retrieved. Only files with the allowed extensions are processed.</p>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">#Only files with the following extensions will be processed</span>
<span class="n">ext_tuple</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;.cs&quot;</span><span class="p">,</span><span class="s2">&quot;.cpp&quot;</span><span class="p">,</span><span class="s2">&quot;.py&quot;</span><span class="p">,</span><span class="s2">&quot;.cc&quot;</span><span class="p">,</span> <span class="s2">&quot;.rst&quot;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">root</span><span class="p">,</span> <span class="n">dirs</span><span class="p">,</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">directory</span><span class="p">,</span> <span class="n">topdown</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
        <span class="n">fname</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span> <span class="ow">and</span> <span class="n">fname</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">ext_tuple</span><span class="p">):</span>
            <span class="n">write</span><span class="p">(</span><span class="n">directory</span><span class="p">,</span> <span class="n">fname</span><span class="p">,</span> <span class="n">options</span><span class="p">,</span> <span class="n">index_rst</span><span class="p">,</span> <span class="n">start_block</span><span class="p">,</span> <span class="n">end_block</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>This else will take place when the -r flag is not given.</p>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">else</span><span class="p">:</span>
    <span class="n">absolute_file_path</span> <span class="o">=</span> <span class="n">absolute_path</span>

    <span class="c1">#Check if the given path refers to an existing file.</span>
    <span class="c1">#The program aborts if the file does not exist or if the path refers to a directory.</span>
    <span class="c1">#A directory is not allowed here because a directory can only be used with the -r option.</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">absolute_file_path</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;file not found: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">absolute_file_path</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

    <span class="n">directory</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">absolute_file_path</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">directory</span><span class="p">:</span>
        <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">directory</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">options</span><span class="o">.</span><span class="n">index</span><span class="p">:</span>
        <span class="c1">#check if output contains a directory or a file name</span>
        <span class="n">index_rst</span> <span class="o">=</span> <span class="n">create_index_file</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">index_rst</span><span class="p">,</span> <span class="n">start_block</span><span class="p">,</span> <span class="n">end_block</span><span class="p">)</span>

    <span class="n">write</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span> <span class="n">absolute_file_path</span><span class="p">,</span> <span class="n">options</span><span class="p">,</span> <span class="n">index_rst</span><span class="p">,</span> <span class="n">start_block</span><span class="p">,</span> <span class="n">end_block</span><span class="p">)</span>

<span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">previous_dir</span><span class="p">)</span>
<span class="k">return</span> <span class="kc">True</span>
</pre></div>
</td></tr></table></div>
<div class="section" id="writing-the-documentation-files">
<h3>Writing the documentation files<a class="headerlink" href="#writing-the-documentation-files" title="Permalink to this headline">¶</a></h3>
<p>From the given file a .rst file will be created if it contains an antiweb <code class="xref py py-class docutils literal"><span class="pre">start()</span> <span class="pre">directive</span></code>.
The following function is called for the creation of the documentation files.</p>
<dl class="method">
<dt id="write">
<code class="descname">write</code><span class="sig-paren">(</span><em>working_dir</em>, <em>input_file</em>, <em>options</em>, <em>index_file</em>, <em>start_block</em>, <em>end_block</em><span class="sig-paren">)</span><a class="headerlink" href="#write" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates the corresponding documention file and optionally adds the processed file to the index file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>working_dir</strong> &#8211; Current working directory.</li>
<li><strong>input_file</strong> &#8211; Contains the absolute path of the currently processed file.</li>
<li><strong>options</strong> &#8211; Commandline options.</li>
<li><strong>index_file</strong> &#8211; Absolute path of the index file.</li>
<li><strong>start_block</strong> &#8211; String which contains the generated index block start definition.</li>
<li><strong>end_block</strong> &#8211; String which contains the generated index block end definition.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Before the input file is processed the name of the output file has to be computed.
How the output file name is created depends on the different commandline options.
When there is no output option given the output file name is created in the following way:</p>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Input File</th>
<th class="head">Output File</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">C:\antiweb\testing.cs</span></code></td>
<td><em>C:\antiweb\testing.rst</em></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">C:\antiweb\testing.rst</span></code></td>
<td><em>C:\antiweb\testing_docs.rst</em></td>
</tr>
</tbody>
</table>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">write</span><span class="p">(</span><span class="n">working_dir</span><span class="p">,</span> <span class="n">input_file</span><span class="p">,</span> <span class="n">options</span><span class="p">,</span> <span class="n">index_file</span><span class="p">,</span> <span class="n">start_block</span><span class="p">,</span> <span class="n">end_block</span><span class="p">):</span>

    <span class="n">output</span> <span class="o">=</span> <span class="n">options</span><span class="o">.</span><span class="n">output</span>
    <span class="n">recursive</span> <span class="o">=</span> <span class="n">options</span><span class="o">.</span><span class="n">recursive</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">output</span><span class="p">:</span>
        <span class="n">out_file</span> <span class="o">=</span> <span class="n">create_out_file_name</span><span class="p">(</span><span class="n">working_dir</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">input_file</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>If there is an output given, we have to distinguish between the recursive and non-recursive option.
When the recursive option is used in combination with the output option, the output parameter is treated as the documentation directory:</p>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Input File</th>
<th class="head">Output File</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">C:\antiweb\</span> <span class="pre">-r</span> <span class="pre">-o</span> <span class="pre">report.rst</span></code></td>
<td><em>C:\antiweb\report.rst\file.rst</em></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">C:\antiweb\</span> <span class="pre">-r</span> <span class="pre">-o</span> <span class="pre">report</span></code></td>
<td><em>C:\antiweb\report\file.rst</em></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">C:\antiweb\</span> <span class="pre">-r</span> <span class="pre">-o</span> <span class="pre">C:\antiweb\report.rst</span></code></td>
<td><em>C:\antiweb\report.rst\file.rst</em></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">C:\antiweb\</span> <span class="pre">-r</span> <span class="pre">-o</span> <span class="pre">\..\report.rst</span></code></td>
<td><em>C:\report.rst\file.rst</em></td>
</tr>
</tbody>
</table>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">else</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">recursive</span><span class="p">:</span>
        <span class="c1">#The output parameter is treated as a directory.</span>
        <span class="c1">#If it is a relative path it is combined with the current working directory.</span>
        <span class="n">directory</span> <span class="o">=</span> <span class="n">output</span>
        <span class="n">out_file</span> <span class="o">=</span> <span class="n">create_out_file_name</span><span class="p">(</span><span class="n">working_dir</span><span class="p">,</span><span class="n">directory</span><span class="p">,</span><span class="n">input_file</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>When the output option is used without the recursive option the output file name is computed in the following way:</p>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Input File</th>
<th class="head">Output File</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">C:\antiweb\testing.cs</span> <span class="pre">-o</span> <span class="pre">report.rst</span></code></td>
<td><em>C:\antiweb\report.rst</em></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">C:\antiweb\testing.cs</span> <span class="pre">-o</span> <span class="pre">report</span></code></td>
<td><em>C:\antiweb\report\testing.rst</em></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">C:\antiweb\testing.cs</span> <span class="pre">-o</span> <span class="pre">\..\report</span></code></td>
<td><em>C:\report\testing.rst</em></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">C:\antiweb\testing.cs</span> <span class="pre">-o</span> <span class="pre">report\report.rst</span></code></td>
<td><em>C:\antiweb\report\report.rst</em></td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">C:\antiweb\testing.cs</span> <span class="pre">-o</span> <span class="pre">report\report.rst\</span></code></td>
<td><em>C:\antiweb\report\report.rst\testing.rst</em></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">C:\antiweb\testing.cs</span> <span class="pre">-o</span> <span class="pre">C:\report\report.rst</span></code></td>
<td><em>C:\report\report.rst</em></td>
</tr>
</tbody>
</table>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></div></td><td class="code"><div class="highlight"><pre><span></span>    <span class="k">else</span><span class="p">:</span>
        <span class="c1">#Get the file extension from output parameter</span>
        <span class="n">file_extension</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">output</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">file_extension</span><span class="p">:</span>
            <span class="c1">#If there is a file extension the last part of the output parameter is treated as the output file name.</span>
            <span class="n">path_tokens</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>
            <span class="n">directory</span> <span class="o">=</span> <span class="n">path_tokens</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">file_name</span> <span class="o">=</span> <span class="n">path_tokens</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

            <span class="c1">#If directory contains an absolute path the working directory will be ignored,</span>
            <span class="c1">#otherwise all three parameters will be joined</span>
            <span class="n">out_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">working_dir</span><span class="p">,</span> <span class="n">directory</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>
            <span class="n">out_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">out_file</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1">#If there is no file extension the whole output parameter is treated as the report directory.</span>
            <span class="n">directory</span> <span class="o">=</span> <span class="n">output</span>
            <span class="n">out_file</span> <span class="o">=</span> <span class="n">create_out_file_name</span><span class="p">(</span><span class="n">working_dir</span><span class="p">,</span> <span class="n">directory</span><span class="p">,</span> <span class="n">input_file</span><span class="p">)</span>

<span class="c1">#Create the documentation directory. If it can&#39;t be created the program exits.</span>
<span class="n">create_doc_directory</span><span class="p">(</span><span class="n">out_file</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>Now the input file is processed and the corresponding documentation file is created.
If processing is successful, &#8216;&#8217;could_process&#8217;&#8217; is set to &#8216;&#8217;True&#8217;&#8216;.</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="n">could_process</span> <span class="o">=</span> <span class="n">process_file</span><span class="p">(</span><span class="n">input_file</span><span class="p">,</span> <span class="n">out_file</span><span class="p">,</span> <span class="n">options</span><span class="o">.</span><span class="n">token</span><span class="p">,</span> <span class="n">options</span><span class="o">.</span><span class="n">warnings</span><span class="p">)</span>
</pre></div>
</div>
<p>If the file was processed successfully and the index option is used, the file name which should be inserted
in the generated index file block has to be computed first. Afterwards the file name is inserted into the
index file (see <a class="reference internal" href="#insert_filename_in_index_file" title="insert_filename_in_index_file"><code class="xref py py-meth docutils literal"><span class="pre">insert_filename_in_index_file()</span></code></a>).</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">options</span><span class="o">.</span><span class="n">index</span> <span class="ow">and</span> <span class="n">could_process</span><span class="p">:</span>
    <span class="n">out_file_name_index</span> <span class="o">=</span> <span class="n">create_out_file_name_index</span><span class="p">(</span><span class="n">out_file</span><span class="p">,</span> <span class="n">working_dir</span><span class="p">,</span> <span class="n">recursive</span><span class="p">)</span>
    <span class="n">insert_filename_in_index_file</span><span class="p">(</span><span class="n">out_file_name_index</span><span class="p">,</span> <span class="n">index_file</span><span class="p">,</span> <span class="n">start_block</span><span class="p">,</span> <span class="n">end_block</span><span class="p">)</span>
</pre></div>
</div>
<dl class="method">
<dt id="create_out_file_name">
<code class="descname">create_out_file_name</code><span class="sig-paren">(</span><em>working_dir</em>, <em>directory</em>, <em>input_file</em><span class="sig-paren">)</span><a class="headerlink" href="#create_out_file_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the absolute path of the output file name. The input file name suffix is replaced by
&#8221;.rst&#8221;. If the input file name ends with &#8221;.rst&#8221; the string &#8220;_docs&#8221; is added before the suffix.
If directory contains a relative path, then the paths of the working_dir and the directory
are combined with the input file name. Otherwise, the directory is combined with the
input file name.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>working_dir</strong> &#8211; Absolute path of the current working directory.</li>
<li><strong>directory</strong> &#8211; The documentation directory (absolute or relative)</li>
<li><strong>input_file</strong> &#8211; The absolute path to the file which should be processed.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The path of the output file.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="25%" />
<col width="25%" />
<col width="25%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Working_Dir</th>
<th class="head">Directory</th>
<th class="head">Input_File_Name</th>
<th class="head">Output_File_Name</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><em>C:\antiweb\</em></td>
<td>doc</td>
<td><em>C:\antiweb\testing.py</em></td>
<td><em>C:\antiweb\doc\testing.rst</em></td>
</tr>
<tr class="row-odd"><td><em>C:\antiweb\</em></td>
<td>&nbsp;</td>
<td><em>C:\antiweb\testing.py</em></td>
<td><em>C:\antiweb\testing.rst</em></td>
</tr>
<tr class="row-even"><td><em>C:\antiweb\</em></td>
<td><em>C:\doc\</em></td>
<td><em>testing.py</em></td>
<td><em>C:\doc\testing.rst</em></td>
</tr>
<tr class="row-odd"><td><em>C:\antiweb\</em></td>
<td>doc</td>
<td><em>C:\antiweb\testing.rst</em></td>
<td><em>C:\antiweb\doc\testing_docs.rst</em></td>
</tr>
</tbody>
</table>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">create_out_file_name</span><span class="p">(</span><span class="n">working_dir</span><span class="p">,</span> <span class="n">directory</span><span class="p">,</span> <span class="n">input_file</span><span class="p">):</span>

    <span class="n">docs</span> <span class="o">=</span> <span class="s2">&quot;_docs&quot;</span>
    <span class="n">rst_suffix</span> <span class="o">=</span> <span class="s2">&quot;.rst&quot;</span>
    <span class="n">out_file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">input_file</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">input_file</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">rst_suffix</span><span class="p">):</span>
        <span class="n">out_file_path</span> <span class="o">=</span>  <span class="n">out_file_path</span> <span class="o">+</span> <span class="n">docs</span>

    <span class="n">out_file_path</span> <span class="o">=</span>  <span class="n">out_file_path</span> <span class="o">+</span> <span class="n">rst_suffix</span>

    <span class="n">out_file_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">out_file_path</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>

    <span class="c1">#If directory contains an absolute path, the working directory is ignored.</span>
    <span class="n">out_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">working_dir</span><span class="p">,</span> <span class="n">directory</span><span class="p">,</span> <span class="n">out_file_name</span><span class="p">)</span>
    <span class="n">out_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">out_file</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">out_file</span>
</pre></div>
</td></tr></table></div>
<dl class="method">
<dt id="create_out_file_name_index">
<code class="descname">create_out_file_name_index</code><span class="sig-paren">(</span><em>out_file</em>, <em>working_dir</em>, <em>recursive</em><span class="sig-paren">)</span><a class="headerlink" href="#create_out_file_name_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates the file name which should be inserted into the generated index file block.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>out_file</strong> &#8211; Absolute path of the output file.</li>
<li><strong>index_file</strong> &#8211; Absolute path of the index file.</li>
<li><strong>recursive</strong> &#8211; Boolean which indicates whether the recursive commandline options is used.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The file name which should be inserted in the generated index file block.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>If the user added the -i flag, an index file (documentation base file) is created which contains all processed files.
The names of the processed files are added between the <code class="xref py py-class docutils literal"><span class="pre">start(generated)</span></code> and <code class="xref py py-class docutils literal"><span class="pre">end(generated)</span></code> directives.
The file names which are inserted into the index file are computed in the following way:</p>
<p>When the recursive option is used the file name in the index file is a relative path without extension.
Otherwise the index file will only contain the filename without extension.
Path seperator characters are replaced by &#8220;_&#8221;.</p>
<div class="line-block">
<div class="line">Non-recursive example with current processed file: <em>C:\antiweb\report.rst\file.rst</em>:</div>
<div class="line"><code class="xref py py-class docutils literal"><span class="pre">start(generated)</span></code></div>
<div class="line"><code class="xref py py-class docutils literal"><span class="pre">file</span></code></div>
<div class="line"><code class="xref py py-class docutils literal"><span class="pre">end(generated)</span></code></div>
<div class="line"><br /></div>
<div class="line">Recursive example with current processed file: <em>C:\antiweb\report.rst\file.rst</em>:</div>
<div class="line"><code class="xref py py-class docutils literal"><span class="pre">start(generated)</span></code></div>
<div class="line"><code class="xref py py-class docutils literal"><span class="pre">report.rst_file</span></code></div>
<div class="line"><code class="xref py py-class docutils literal"><span class="pre">end(generated)</span></code></div>
<div class="line"><br /></div>
</div>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">create_out_file_name_index</span><span class="p">(</span><span class="n">out_file</span><span class="p">,</span> <span class="n">working_dir</span><span class="p">,</span> <span class="n">recursive</span><span class="p">):</span>

    <span class="c1">#1) Obtain only the file name</span>
    <span class="n">out_file_name_index</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">out_file</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
    <span class="c1">#2) Remove the extension</span>
    <span class="n">out_file_name_index</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">out_file_name_index</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">recursive</span><span class="p">:</span>
        <span class="n">out_file_name_index</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">relpath</span><span class="p">(</span><span class="n">out_file_name_index</span><span class="p">,</span> <span class="n">working_dir</span><span class="p">)</span>
        <span class="n">out_file_name_index</span> <span class="o">=</span> <span class="n">replace_path_seperator</span><span class="p">(</span><span class="n">out_file_name_index</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">out_file_name_index</span>
</pre></div>
</td></tr></table></div>
<dl class="method">
<dt id="insert_filename_in_index_file">
<code class="descname">insert_filename_in_index_file</code><span class="sig-paren">(</span><em>file_name</em>, <em>index_file</em>, <em>start_block</em>, <em>end_block</em><span class="sig-paren">)</span><a class="headerlink" href="#insert_filename_in_index_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Inserts the given file name into the generated block in the index file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>file_name</strong> &#8211; The file name which should be inserted into the index file.</li>
<li><strong>index_file</strong> &#8211; Absolute path of the index file.</li>
<li><strong>start_block</strong> &#8211; String which contains the generated index block start definition.</li>
<li><strong>end_block</strong> &#8211; String which contains the generated index block end definition.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>If the user added the -i flag, an index file (documentation base file) is created which contains all processed files.
Between the <code class="xref py py-class docutils literal"><span class="pre">start(generated)</span></code> and <code class="xref py py-class docutils literal"><span class="pre">end(generated)</span></code> directives the names of the processed files are added.
Read  <a class="reference internal" href="#create_out_file_name_index" title="create_out_file_name_index"><code class="xref py py-meth docutils literal"><span class="pre">create_out_file_name_index()</span></code></a> for more information about how the inserted file name is computed.
Files can be manually added after the <code class="xref py py-class docutils literal"><span class="pre">end(generated)</span></code> directive.</p>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">insert_filename_in_index_file</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="n">index_file</span><span class="p">,</span> <span class="n">start_block</span><span class="p">,</span> <span class="n">end_block</span><span class="p">):</span>

    <span class="c1">#At first the position has to be found where the new file should be inserted.</span>
    <span class="n">content</span><span class="p">,</span> <span class="n">endline</span> <span class="o">=</span> <span class="n">search_for_generated_block</span><span class="p">(</span><span class="n">index_file</span><span class="p">,</span> <span class="n">start_block</span><span class="p">,</span> <span class="n">end_block</span><span class="p">)</span>

    <span class="c1">#If the index file does not contain the generated block, it is appended.</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">content</span><span class="p">:</span>
        <span class="n">write_static</span><span class="p">(</span><span class="n">index_file</span><span class="p">,</span> <span class="n">start_block</span><span class="p">,</span> <span class="n">end_block</span><span class="p">)</span>
        <span class="n">content</span><span class="p">,</span> <span class="n">endline</span> <span class="o">=</span> <span class="n">search_for_generated_block</span><span class="p">(</span><span class="n">index_file</span><span class="p">,</span> <span class="n">start_block</span><span class="p">,</span> <span class="n">end_block</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">endline</span><span class="p">:</span>
        <span class="c1">#The new file name is inserted into the index file contents.</span>
        <span class="n">content</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">endline</span><span class="p">,</span> <span class="s2">&quot;   &quot;</span> <span class="o">+</span> <span class="n">file_name</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="c1">#The adapted index file contents are written out to the index file.</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">index_file</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">index_out</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">content</span><span class="p">:</span>
                <span class="n">index_out</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">IOError</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Error: Could not write to index file: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>  <span class="n">index_file</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<dl class="method">
<dt id="create_doc_directory">
<code class="descname">create_doc_directory</code><span class="sig-paren">(</span><em>out_file</em><span class="sig-paren">)</span><a class="headerlink" href="#create_doc_directory" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates the documentation directory if it does not yet exist.
If an error occurs, the program exits.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>out_file</strong> &#8211; The path to the output file.</td>
</tr>
</tbody>
</table>
</dd></dl>

<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">create_doc_directory</span><span class="p">(</span><span class="n">out_file</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">out_file_directory</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">out_file</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">out_file_directory</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">out_file_directory</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">IOError</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Error: Documentation Directory: </span><span class="si">%s</span><span class="s2"> could not be created&quot;</span><span class="p">,</span>  <span class="n">out_file_directory</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<dl class="method">
<dt id="replace_path_seperator">
<code class="descname">replace_path_seperator</code><span class="sig-paren">(</span><em>file_path</em><span class="sig-paren">)</span><a class="headerlink" href="#replace_path_seperator" title="Permalink to this definition">¶</a></dt>
<dd><p>Replaces OS specific path seperator characters by &#8216;_&#8217;.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>file_path</strong> &#8211; The path to a file.</td>
</tr>
</tbody>
</table>
</dd></dl>

<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">replace_path_seperator</span><span class="p">(</span><span class="n">file_path</span><span class="p">):</span>
<span class="c1">#Path seperator characters are replaced by &quot;_&quot; in the index file</span>
    <span class="k">if</span> <span class="n">_platform</span> <span class="o">==</span> <span class="s2">&quot;linux&quot;</span> <span class="ow">or</span> <span class="n">_platform</span> <span class="o">==</span> <span class="s2">&quot;linux2&quot;</span><span class="p">:</span>
        <span class="n">file_path</span> <span class="o">=</span> <span class="n">file_path</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">,</span><span class="s2">&quot;_&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">_platform</span> <span class="o">==</span> <span class="s2">&quot;win32&quot;</span><span class="p">:</span>
        <span class="n">file_path</span> <span class="o">=</span> <span class="n">file_path</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">&quot;</span><span class="p">,</span><span class="s2">&quot;_&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">file_path</span>
</pre></div>
</td></tr></table></div>
<dl class="method">
<dt id="write_static">
<code class="descname">write_static</code><span class="sig-paren">(</span><em>index_file</em>, <em>start_of_block</em>, <em>end_of_block</em><span class="sig-paren">)</span><a class="headerlink" href="#write_static" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes the static contents to the index file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>index_file</strong> &#8211; Absolute path of the index file.</li>
<li><strong>start_block</strong> &#8211; String which contains the generated index block start definition.</li>
<li><strong>end_block</strong> &#8211; String which contains the generated index block end definition.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">write_static</span><span class="p">(</span><span class="n">index_file</span><span class="p">,</span> <span class="n">start_block</span><span class="p">,</span> <span class="n">end_block</span><span class="p">):</span>

    <span class="n">index_generated</span> <span class="o">=</span> <span class="s2">&quot;   &quot;</span> <span class="o">+</span> <span class="n">start_block</span> <span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">   &quot;</span> <span class="o">+</span> <span class="n">end_block</span>
    <span class="n">write_option</span> <span class="o">=</span> <span class="s2">&quot;w&quot;</span>
    <span class="n">index_content</span> <span class="o">=</span> <span class="s2">&quot;Documentation</span><span class="se">\n</span><span class="s2">=======================</span><span class="se">\n</span><span class="s2">Contents:</span><span class="se">\n\n</span><span class="s2">.. toctree::</span><span class="se">\n</span><span class="s2">   :maxdepth: 2</span><span class="se">\n\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">index_generated</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">index_file</span><span class="p">),</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">index_file</span><span class="p">,</span> <span class="n">write_option</span><span class="p">)</span> <span class="k">as</span> <span class="n">index_out</span><span class="p">:</span>
            <span class="n">index_out</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">index_content</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">IOError</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Error: Index File: </span><span class="si">%s</span><span class="s2"> could not be created.&quot;</span><span class="p">,</span>  <span class="n">index_file</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<dl class="method">
<dt id="create_index_file">
<code class="descname">create_index_file</code><span class="sig-paren">(</span><em>working_dir</em>, <em>directory</em>, <em>file_name</em>, <em>start_block</em>, <em>end_block</em><span class="sig-paren">)</span><a class="headerlink" href="#create_index_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates the index file and writes the standard index file contents into the file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>working_dir</strong> &#8211; Current working directory.</li>
<li><strong>directory</strong> &#8211; Output directory (may contain a directory path or a directory name)</li>
<li><strong>file_name</strong> &#8211; Filename of the index file.</li>
<li><strong>start_block</strong> &#8211; String which contains the generated index block start definition.</li>
<li><strong>end_block</strong> &#8211; String which contains the generated index block end definition.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The absolute path of the index file.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">create_index_file</span><span class="p">(</span><span class="n">working_dir</span><span class="p">,</span> <span class="n">directory</span><span class="p">,</span> <span class="n">file_name</span><span class="p">,</span> <span class="n">start_block</span><span class="p">,</span> <span class="n">end_block</span><span class="p">):</span>

    <span class="n">index_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">working_dir</span><span class="p">,</span> <span class="n">directory</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>
    <span class="n">index_file_absolute</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">index_file</span><span class="p">)</span>

    <span class="c1">#index file is overwritten if it already exists</span>
    <span class="n">write_static</span><span class="p">(</span><span class="n">index_file_absolute</span><span class="p">,</span> <span class="n">start_block</span><span class="p">,</span> <span class="n">end_block</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">index_file</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="process-file">
<h3>process_file<a class="headerlink" href="#process-file" title="Permalink to this headline">¶</a></h3>
<p>If no output name was declared, the input name will be given</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">process_file</span><span class="p">(</span><span class="n">in_file</span><span class="p">,</span> <span class="n">out_file</span><span class="p">,</span> <span class="n">token</span><span class="p">,</span> <span class="n">warnings</span><span class="p">):</span>
</pre></div>
</div>
<p>The output text will be written in the output file. If there is an output text, the function returns could_write as True.</p>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">could_write</span> <span class="o">=</span> <span class="kc">False</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">text_output</span> <span class="o">=</span> <span class="n">generate</span><span class="p">(</span><span class="n">in_file</span><span class="p">,</span> <span class="n">token</span><span class="p">,</span> <span class="n">warnings</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">text_output</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">out_file</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">text_output</span><span class="p">)</span>
        <span class="n">could_write</span> <span class="o">=</span> <span class="kc">True</span>
<span class="k">except</span> <span class="n">WebError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Errors:&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">l</span><span class="p">,</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">e</span><span class="o">.</span><span class="n">error_list</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;  in line </span><span class="si">%i</span><span class="s2">(</span><span class="si">%s</span><span class="s2">): </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">l</span><span class="o">.</span><span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">l</span><span class="o">.</span><span class="n">fname</span><span class="p">,</span> <span class="n">d</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;      </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">l</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>

<span class="k">return</span> <span class="n">could_write</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="search-for-generated-block">
<h3>search_for_generated_block<a class="headerlink" href="#search-for-generated-block" title="Permalink to this headline">¶</a></h3>
<p>The index file is searched for the generated block. The contents in the generated block are deleted.
Afterwards the whole file content and the endline of the generated block are returned.</p>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">search_for_generated_block</span><span class="p">(</span><span class="n">index_rst</span><span class="p">,</span> <span class="n">start_of_block</span><span class="p">,</span> <span class="n">end_of_block</span><span class="p">):</span>

    <span class="n">startline</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">endline</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">content</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">index_rst</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">index_file</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">num</span><span class="p">,</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">index_file</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">start_of_block</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>
                <span class="n">startline</span> <span class="o">=</span> <span class="n">num</span>
            <span class="k">if</span> <span class="n">end_of_block</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>
                <span class="n">endline</span> <span class="o">=</span> <span class="n">num</span>

            <span class="k">if</span> <span class="n">startline</span> <span class="ow">and</span> <span class="n">endline</span><span class="p">:</span>
                <span class="n">index_file</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
                <span class="n">content</span> <span class="o">=</span> <span class="n">index_file</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
                <span class="c1">#delete content of generated block</span>
                <span class="k">del</span> <span class="n">content</span><span class="p">[</span><span class="n">startline</span><span class="o">+</span><span class="mi">1</span><span class="p">:</span><span class="n">endline</span><span class="p">]</span>
                <span class="c1">#set endline = old_endline - deleted lines</span>
                <span class="n">endline</span> <span class="o">=</span> <span class="n">endline</span> <span class="o">-</span> <span class="p">(</span><span class="n">endline</span><span class="o">-</span><span class="p">(</span><span class="n">startline</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">endline</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<dl class="method">
<dt>
<code class="descname">def parsing()</code></dt>
<dd><p>All possible input options are being defined, as well as their help-message, type and variable the values are stored in.
If no arguments are given (the user did not provide a filepath), the current directory is set as the argument.</p>
</dd></dl>

<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">parsing</span><span class="p">():</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">OptionParser</span><span class="p">(</span><span class="s2">&quot;usage: %prog [options] SOURCEFILE&quot;</span><span class="p">,</span>
                          <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Tangles a source code file to a rst file.&quot;</span><span class="p">,</span>
                          <span class="n">version</span><span class="o">=</span><span class="s2">&quot;%prog &quot;</span> <span class="o">+</span> <span class="n">__version__</span><span class="p">)</span>

    <span class="n">parser</span><span class="o">.</span><span class="n">add_option</span><span class="p">(</span><span class="s2">&quot;-o&quot;</span><span class="p">,</span> <span class="s2">&quot;--output&quot;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;output&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                      <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;The output filename&quot;</span><span class="p">)</span>

    <span class="n">parser</span><span class="o">.</span><span class="n">add_option</span><span class="p">(</span><span class="s2">&quot;-t&quot;</span><span class="p">,</span> <span class="s2">&quot;--token&quot;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;token&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;append&quot;</span><span class="p">,</span>
                      <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;string&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;defines a token, usable by @if directives&quot;</span><span class="p">)</span>

    <span class="n">parser</span><span class="o">.</span><span class="n">add_option</span><span class="p">(</span><span class="s2">&quot;-w&quot;</span><span class="p">,</span> <span class="s2">&quot;--warnings&quot;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;warnings&quot;</span><span class="p">,</span>
                      <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_false&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;suppresses warnings&quot;</span><span class="p">)</span>

    <span class="n">parser</span><span class="o">.</span><span class="n">add_option</span><span class="p">(</span><span class="s2">&quot;-r&quot;</span><span class="p">,</span> <span class="s2">&quot;--recursive&quot;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;recursive&quot;</span><span class="p">,</span>
                      <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Process every file in given directory&quot;</span><span class="p">)</span>

    <span class="n">parser</span><span class="o">.</span><span class="n">add_option</span><span class="p">(</span><span class="s2">&quot;-i&quot;</span><span class="p">,</span> <span class="s2">&quot;--index&quot;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;index&quot;</span><span class="p">,</span>
                      <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Automatically write file(s) to Sphinx&#39; index.rst&quot;</span><span class="p">)</span>

    <span class="n">options</span><span class="p">,</span> <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>

    <span class="c1">#There is no argument given, so we assume the user wants to use the current directory.</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span><span class="p">:</span>
        <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">())</span>
    <span class="c1"># parsing() returns the selected options, arguments (the filepath/folderpath) and the parser</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">options</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">parser</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<dl class="docutils">
<dt>if __name__ == &#8220;__main__&#8221;:</dt>
<dd>main()</dd>
</dl>
</div>
<div class="section" id="imports">
<h3>&lt;&lt;imports&gt;&gt;<a class="headerlink" href="#imports" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">optparse</span> <span class="k">import</span> <span class="n">OptionParser</span>
<span class="kn">import</span> <span class="nn">pygments.lexers</span> <span class="k">as</span> <span class="nn">pm</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">os.path</span>
<span class="kn">import</span> <span class="nn">operator</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">sys</span> <span class="k">import</span> <span class="n">platform</span> <span class="k">as</span> <span class="n">_platform</span>

<span class="kn">from</span> <span class="nn">antiweb_lib.readers.Reader</span> <span class="k">import</span> <span class="n">Reader</span><span class="p">,</span> <span class="n">Line</span>
<span class="kn">from</span> <span class="nn">antiweb_lib.readers.CReader</span> <span class="k">import</span> <span class="n">CReader</span>
<span class="kn">from</span> <span class="nn">antiweb_lib.readers.CSharpReader</span> <span class="k">import</span> <span class="n">CSharpReader</span>
<span class="kn">from</span> <span class="nn">antiweb_lib.readers.ClojureReader</span> <span class="k">import</span> <span class="n">ClojureReader</span>
<span class="kn">from</span> <span class="nn">antiweb_lib.readers.GenericReader</span> <span class="k">import</span> <span class="n">GenericReader</span>
<span class="kn">from</span> <span class="nn">antiweb_lib.readers.rstReader</span> <span class="k">import</span> <span class="n">rstReader</span>
<span class="kn">from</span> <span class="nn">antiweb_lib.readers.PythonReader</span> <span class="k">import</span> <span class="n">PythonReader</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="management">
<h3>&lt;&lt;management&gt;&gt;<a class="headerlink" href="#management" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">__version__</span> <span class="o">=</span> <span class="s2">&quot;0.3.3&quot;</span>

<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s1">&#39;antiweb&#39;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">WebError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error_list</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">error_list</span> <span class="o">=</span> <span class="n">error_list</span>

<span class="c1"># The keys are the lexer names of pygments</span>
<span class="n">readers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;C&quot;</span> <span class="p">:</span> <span class="n">CReader</span><span class="p">,</span>
    <span class="s2">&quot;C++&quot;</span> <span class="p">:</span> <span class="n">CReader</span><span class="p">,</span>
    <span class="s2">&quot;C#&quot;</span> <span class="p">:</span> <span class="n">CSharpReader</span><span class="p">,</span>
    <span class="s2">&quot;Python&quot;</span> <span class="p">:</span> <span class="n">PythonReader</span><span class="p">,</span>
    <span class="s2">&quot;Clojure&quot;</span> <span class="p">:</span> <span class="n">ClojureReader</span><span class="p">,</span>
    <span class="s2">&quot;rst&quot;</span> <span class="p">:</span> <span class="n">rstReader</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="id2">
<h3>&lt;&lt;document&gt;&gt;<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="o">&lt;&lt;</span><span class="n">Document</span><span class="o">&gt;&gt;</span>
<span class="o">&lt;&lt;</span><span class="n">generate</span><span class="o">&gt;&gt;</span>

<span class="o">&lt;&lt;</span><span class="n">get_comment_markers</span><span class="o">&gt;&gt;</span>
</pre></div>
</td></tr></table></div>
</div>
</div>
<div class="section" id="multi-file-processing-and-sphinx-support">
<h2>Multi-File Processing and Sphinx Support<a class="headerlink" href="#multi-file-processing-and-sphinx-support" title="Permalink to this headline">¶</a></h2>
<p>antiweb supports Sphinx, which means that antiweb can provide you with an index.rst document that includes all processed files.
To use that feature you simple have to use the -i option. Additionally you can process multiple files at once with the -r option added.
The needed parameter then can be empty to use the current directory or you provide the directory antiweb should use.</p>
</div>
<div class="section" id="how-to-add-new-languages">
<h2>How to add new languages<a class="headerlink" href="#how-to-add-new-languages" title="Permalink to this headline">¶</a></h2>
<p>New languages are added by writing a new Reader class
and registering it in the readers dictionary (see readers).
A simple Reader example is provides by <a class="reference internal" href="Reader.html#CReader" title="CReader"><code class="xref py py-class docutils literal"><span class="pre">CReader</span></code></a>
a more advances reader is <a class="reference internal" href="Reader.html#PythonReader" title="PythonReader"><code class="xref py py-class docutils literal"><span class="pre">PythonReader</span></code></a>.</p>
<div class="section" id="language-specific-comment-markers">
<h3>Language specific comment markers<a class="headerlink" href="#language-specific-comment-markers" title="Permalink to this headline">¶</a></h3>
<p>If a new language is added, its comment markers also have to be registered in the following map.
The map contains the definition of all language specific comment markers.</p>
<p>The comment markers of a language are defined in the format:
<code class="docutils literal"><span class="pre">&quot;language&quot;</span> <span class="pre">:</span> <span class="pre">([single_comment_tokens],[start_block_token,</span> <span class="pre">end_block_token])</span></code></p>
<p>Multiple single and block comment markers can be defined.</p>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">comments</span> <span class="o">=</span> <span class="p">{</span>
<span class="s2">&quot;C&quot;</span> <span class="p">:</span> <span class="p">([</span><span class="s2">&quot;//&quot;</span><span class="p">],([</span><span class="s2">&quot;/*&quot;</span><span class="p">,</span><span class="s2">&quot;*/&quot;</span><span class="p">])),</span>
<span class="s2">&quot;C++&quot;</span> <span class="p">:</span> <span class="p">([</span><span class="s2">&quot;//&quot;</span><span class="p">],([</span><span class="s2">&quot;/*&quot;</span><span class="p">,</span><span class="s2">&quot;*/&quot;</span><span class="p">])),</span>
<span class="s2">&quot;C#&quot;</span> <span class="p">:</span> <span class="p">([</span><span class="s2">&quot;//&quot;</span><span class="p">],([</span><span class="s2">&quot;/*&quot;</span><span class="p">,</span><span class="s2">&quot;*/&quot;</span><span class="p">])),</span>
<span class="s2">&quot;Python&quot;</span> <span class="p">:</span> <span class="p">([</span><span class="s2">&quot;#&quot;</span><span class="p">],([</span><span class="s2">&quot;&#39;&#39;&#39;&quot;</span><span class="p">,</span><span class="s2">&quot;&#39;&#39;&#39;&quot;</span><span class="p">],[</span><span class="s2">&quot;</span><span class="se">\&quot;\&quot;\&quot;</span><span class="s2">&quot;</span><span class="p">,</span><span class="s2">&quot;</span><span class="se">\&quot;\&quot;\&quot;</span><span class="s2">&quot;</span><span class="p">])),</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>From the map above the comment markers are retrieved via the following method:</p>
<dl class="function">
<dt id="get_comment_markers">
<code class="descname">get_comment_markers</code><span class="sig-paren">(</span><em>lexer_name</em><span class="sig-paren">)</span><a class="headerlink" href="#get_comment_markers" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieves the language specific comment markers from the comments map.
The comment markers of C serves as the default comment markers if the lexer name cannot be found.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>lexer_name</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a>) &#8211; The name of the pygments lexer.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The single and comment block markers defined by the language</td>
</tr>
</tbody>
</table>
<div class="highlight-python3"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_comment_markers</span><span class="p">(</span><span class="n">lexer_name</span><span class="p">):</span>
    <span class="n">comment_markers</span> <span class="o">=</span> <span class="n">comments</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">lexer_name</span><span class="p">,</span> <span class="n">comments</span><span class="p">[</span><span class="s2">&quot;C&quot;</span><span class="p">])</span>
    <span class="n">single_comment_markers</span> <span class="o">=</span> <span class="n">comment_markers</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">block_comment_markers</span> <span class="o">=</span> <span class="n">comment_markers</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">single_comment_markers</span><span class="p">,</span>  <span class="n">block_comment_markers</span>
</pre></div>
</td></tr></table></div>
</dd></dl>

</div>
</div>
<div class="section" id="example">
<h2>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h2>
<p>See the <span class="xref std std-ref">antiweb</span> source as an advanced example.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Reader.html" class="btn btn-neutral float-right" title="Readers" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="process_overview.html" class="btn btn-neutral" title="Process overview" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Michael Reithinger, Philipp Rathmanner, Lukas Tanner, Philipp Grandits, Christian Eitner.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.3.3',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>